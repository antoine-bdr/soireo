<!-- src/app/features/auth/register/register.page.html -->

<ion-header>
  <ion-toolbar color="primary">
    <ion-title>Inscription</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  
  <div class="register-container">
    
    <!-- Logo -->
    <div class="app-logo">
      <h1>üéâ Party Events</h1>
      <p>Rejoins la communaut√© et d√©couvre des soir√©es incroyables</p>
    </div>

    <!-- Card du formulaire -->
    <ion-card>
      <ion-card-header>
        <ion-card-title>Cr√©er un compte</ion-card-title>
      </ion-card-header>

      <ion-card-content>
        
        <!-- Formulaire d'inscription -->
        <form [formGroup]="registerForm" (ngSubmit)="register()">
          
          <!-- Champ Nom -->
          <ion-item lines="full" class="ion-margin-bottom">
            <ion-icon name="person-outline" slot="start"></ion-icon>
            <ion-label position="floating">Nom d'affichage</ion-label>
            <ion-input 
              type="text" 
              formControlName="displayName"
              placeholder="Ton pr√©nom ou pseudo"
              autocomplete="name">
            </ion-input>
          </ion-item>
          
          <!-- Messages d'erreur pour le nom -->
          <div class="error-message" *ngIf="displayName?.invalid && displayName?.touched">
            <ion-text color="danger" *ngIf="displayName?.errors?.['required']">
              <small>Le nom est requis</small>
            </ion-text>
            <ion-text color="danger" *ngIf="displayName?.errors?.['minlength']">
              <small>Minimum 2 caract√®res</small>
            </ion-text>
            <ion-text color="danger" *ngIf="displayName?.errors?.['maxlength']">
              <small>Maximum 50 caract√®res</small>
            </ion-text>
          </div>

          <!-- Champ Email -->
          <ion-item lines="full" class="ion-margin-bottom">
            <ion-icon name="mail-outline" slot="start"></ion-icon>
            <ion-label position="floating">Email</ion-label>
            <ion-input 
              type="email" 
              formControlName="email"
              placeholder="exemple@email.com"
              autocomplete="email">
            </ion-input>
          </ion-item>
          
          <!-- Messages d'erreur pour l'email -->
          <div class="error-message" *ngIf="email?.invalid && email?.touched">
            <ion-text color="danger" *ngIf="email?.errors?.['required']">
              <small>L'email est requis</small>
            </ion-text>
            <ion-text color="danger" *ngIf="email?.errors?.['email']">
              <small>Format d'email invalide</small>
            </ion-text>
          </div>

          <!-- Champ Mot de passe -->
          <ion-item lines="full" class="ion-margin-bottom">
            <ion-icon name="lock-closed-outline" slot="start"></ion-icon>
            <ion-label position="floating">Mot de passe</ion-label>
            <ion-input 
              type="password" 
              formControlName="password"
              placeholder="Minimum 6 caract√®res"
              autocomplete="new-password">
            </ion-input>
          </ion-item>
          
          <!-- Messages d'erreur pour le mot de passe -->
          <div class="error-message" *ngIf="password?.invalid && password?.touched">
            <ion-text color="danger" *ngIf="password?.errors?.['required']">
              <small>Le mot de passe est requis</small>
            </ion-text>
            <ion-text color="danger" *ngIf="password?.errors?.['minlength']">
              <small>Minimum 6 caract√®res requis</small>
            </ion-text>
          </div>

          <!-- Champ Confirmation mot de passe -->
          <ion-item lines="full" class="ion-margin-bottom">
            <ion-icon name="checkmark-circle-outline" slot="start"></ion-icon>
            <ion-label position="floating">Confirmer le mot de passe</ion-label>
            <ion-input 
              type="password" 
              formControlName="confirmPassword"
              placeholder="Retape ton mot de passe"
              autocomplete="new-password">
            </ion-input>
          </ion-item>
          
          <!-- Messages d'erreur pour la confirmation -->
          <div class="error-message" *ngIf="confirmPassword?.invalid && confirmPassword?.touched">
            <ion-text color="danger" *ngIf="confirmPassword?.errors?.['required']">
              <small>La confirmation est requise</small>
            </ion-text>
            <ion-text color="danger" *ngIf="confirmPassword?.errors?.['passwordMismatch']">
              <small>Les mots de passe ne correspondent pas</small>
            </ion-text>
          </div>

          <!-- Bouton d'inscription -->
          <ion-button 
            expand="block" 
            type="submit" 
            class="ion-margin-top"
            [disabled]="registerForm.invalid || isLoading">
            <ion-icon name="checkmark-circle-outline" slot="start"></ion-icon>
            S'inscrire
          </ion-button>

        </form>

        <!-- Lien vers connexion -->
        <div class="login-link ion-text-center ion-margin-top">
          <ion-text>
            D√©j√† un compte ? 
            <a routerLink="/login" class="link">Se connecter</a>
          </ion-text>
        </div>

      </ion-card-content>
    </ion-card>

  </div>

</ion-content>