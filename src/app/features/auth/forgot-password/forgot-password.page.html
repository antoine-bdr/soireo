<!-- üîê Page de r√©initialisation de mot de passe -->
<ion-content class="forgot-password-content">
  
  <!-- üåü Background gradient -->
  <div class="background-gradient"></div>
  
  <!-- üì¶ Container principal -->
  <div class="forgot-password-container">
    
    <!-- üîô Bouton retour -->
    <ion-button 
      fill="clear" 
      class="back-button"
      (click)="goToLogin()"
      aria-label="Retour √† la connexion">
      <ion-icon slot="start" name="arrow-back"></ion-icon>
      Retour
    </ion-button>
    
    <!-- ========================================
         üìß FORMULAIRE (Si email pas encore envoy√©)
    ======================================== -->
    <div class="form-card" *ngIf="!emailSent">
      
      <!-- Logo/Ic√¥ne -->
      <div class="logo-container">
        <div class="logo-icon">
          <ion-icon name="lock-closed"></ion-icon>
        </div>
      </div>
      
      <!-- Titre et description -->
      <h1 class="title">Mot de passe oubli√© ?</h1>
      <p class="subtitle">
        Pas de panique ! Entrez votre adresse email et nous vous enverrons un lien pour r√©initialiser votre mot de passe.
      </p>
      
      <!-- Formulaire -->
      <form [formGroup]="forgotPasswordForm" (ngSubmit)="onSubmit()">
        
        <!-- Champ Email -->
        <div class="input-group">
          <ion-label class="input-label">Adresse email</ion-label>
          
          <div class="input-wrapper">
            <ion-icon name="mail" class="input-icon"></ion-icon>
            <ion-input
              type="email"
              formControlName="email"
              placeholder="exemple@email.com"
              autocomplete="email"
              [class.input-error]="hasError('email', 'required') || hasError('email', 'email') || hasError('email', 'pattern')"
              class="custom-input">
            </ion-input>
          </div>
          
          <!-- Messages d'erreur -->
          <div class="error-message" *ngIf="hasError('email', 'required')">
            <ion-icon name="alert-circle"></ion-icon>
            L'adresse email est requise
          </div>
          <div class="error-message" *ngIf="hasError('email', 'email') || hasError('email', 'pattern')">
            <ion-icon name="alert-circle"></ion-icon>
            Format d'email invalide
          </div>
        </div>
        
        <!-- Bouton Envoyer -->
        <ion-button
          type="submit"
          expand="block"
          class="submit-button"
          [disabled]="forgotPasswordForm.invalid || isSubmitting">
          <ion-icon slot="start" name="paper-plane"></ion-icon>
          {{ isSubmitting ? 'Envoi en cours...' : 'Envoyer le lien' }}
        </ion-button>
        
      </form>
    </div>
    
    <!-- ========================================
         ‚úÖ CONFIRMATION (Si email envoy√©)
    ======================================== -->
    <div class="success-card" *ngIf="emailSent">
      
      <!-- Ic√¥ne de succ√®s -->
      <div class="success-icon">
        <ion-icon name="checkmark-circle"></ion-icon>
      </div>
      
      <!-- Message de succ√®s -->
      <h1 class="success-title">Email envoy√© !</h1>
      <p class="success-message">
        Nous avons envoy√© un lien de r√©initialisation √† <strong>{{ forgotPasswordForm.value.email }}</strong>.
      </p>
      <p class="success-info">
        V√©rifiez votre bo√Æte de r√©ception et suivez les instructions pour cr√©er un nouveau mot de passe.
      </p>
      
      <!-- Conseils -->
      <div class="tips-box">
        <ion-icon name="information-circle"></ion-icon>
        <div class="tips-content">
          <p><strong>Vous ne voyez pas l'email ?</strong></p>
          <ul>
            <li>V√©rifiez votre dossier spam/courrier ind√©sirable</li>
            <li>Attendez quelques minutes</li>
            <li>V√©rifiez que l'adresse email est correcte</li>
          </ul>
        </div>
      </div>
      
      <!-- Boutons d'action -->
      <div class="action-buttons">
        <ion-button
          expand="block"
          fill="solid"
          class="primary-button"
          (click)="goToLogin()">
          <ion-icon slot="start" name="log-in"></ion-icon>
          Retour √† la connexion
        </ion-button>
        
        <ion-button
          expand="block"
          fill="outline"
          class="secondary-button"
          (click)="resetForm()">
          <ion-icon slot="start" name="reload"></ion-icon>
          Renvoyer √† une autre adresse
        </ion-button>
      </div>
    </div>
    
    <!-- Footer -->
    <div class="footer-text">
      <p>
        Vous vous souvenez de votre mot de passe ?
        <a (click)="goToLogin()" class="link">Se connecter</a>
      </p>
    </div>
    
  </div>
  
</ion-content>