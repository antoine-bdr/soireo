<!-- src/app/features/auth/login/login.page.html -->

<!-- Header avec titre -->
<ion-header>
  <ion-toolbar color="primary">
    <ion-title>Connexion</ion-title>
  </ion-toolbar>
</ion-header>

<!-- Contenu principal -->
<ion-content class="ion-padding">
  
  <!-- Container centrÃ© -->
  <div class="login-container">
    
    <!-- Logo ou titre de l'application -->
    <div class="app-logo">
      <h1>ðŸŽ‰ Party Events</h1>
      <p>Retrouve tes amis et dÃ©couvre de nouvelles soirÃ©es</p>
    </div>

    <!-- Card contenant le formulaire -->
    <ion-card>
      <ion-card-header>
        <ion-card-title>Se connecter</ion-card-title>
      </ion-card-header>

      <ion-card-content>
        
        <!-- Formulaire de connexion -->
        <form [formGroup]="loginForm" (ngSubmit)="login()">
          
          <!-- Champ Email -->
          <ion-item lines="full" class="ion-margin-bottom">
            <ion-icon name="mail-outline" slot="start"></ion-icon>
            <ion-label position="floating">Email</ion-label>
            <ion-input 
              type="email" 
              formControlName="email"
              placeholder="exemple@email.com"
              autocomplete="email">
            </ion-input>
          </ion-item>
          
          <!-- Messages d'erreur pour l'email -->
          <div class="error-message" *ngIf="email?.invalid && email?.touched">
            <ion-text color="danger" *ngIf="email?.errors?.['required']">
              <small>L'email est requis</small>
            </ion-text>
            <ion-text color="danger" *ngIf="email?.errors?.['email']">
              <small>Format d'email invalide</small>
            </ion-text>
          </div>

          <!-- Champ Mot de passe -->
          <ion-item lines="full" class="ion-margin-bottom">
            <ion-icon name="lock-closed-outline" slot="start"></ion-icon>
            <ion-label position="floating">Mot de passe</ion-label>
            <ion-input 
              type="password" 
              formControlName="password"
              placeholder="Minimum 6 caractÃ¨res"
              autocomplete="current-password">
            </ion-input>
          </ion-item>
          
          <!-- Messages d'erreur pour le mot de passe -->
          <div class="error-message" *ngIf="password?.invalid && password?.touched">
            <ion-text color="danger" *ngIf="password?.errors?.['required']">
              <small>Le mot de passe est requis</small>
            </ion-text>
            <ion-text color="danger" *ngIf="password?.errors?.['minlength']">
              <small>Minimum 6 caractÃ¨res requis</small>
            </ion-text>
          </div>

          <!-- Bouton de connexion -->
          <ion-button 
            expand="block" 
            type="submit" 
            class="ion-margin-top"
            [disabled]="loginForm.invalid || isLoading">
            <ion-icon name="log-in-outline" slot="start"></ion-icon>
            Se connecter
          </ion-button>

        </form>

        <!-- SÃ©parateur -->
        <div class="separator ion-margin-vertical">
          <span>ou</span>
        </div>

        <!-- Bouton connexion Google -->
        <ion-button 
          expand="block" 
          color="light" 
          (click)="signInWithGoogle()"
          [disabled]="isLoading">
          <ion-icon name="logo-google" slot="start" color="danger"></ion-icon>
          Continuer avec Google
        </ion-button>

        <!-- Lien vers inscription -->
        <div class="register-link ion-text-center ion-margin-top">
          <ion-text>
            Pas encore de compte ? 
            <a routerLink="/register" class="link">S'inscrire</a>
          </ion-text>
        </div>

      </ion-card-content>
    </ion-card>

  </div>

</ion-content>