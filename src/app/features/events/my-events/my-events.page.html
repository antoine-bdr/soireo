<!-- ========================================
     üéØ MY EVENTS PAGE - STYLE EVENT-LIST
     Design harmonis√© avec event-list.page
     ======================================== -->

<!-- ========================================
     HEADER
     ======================================== -->
     <ion-header [translucent]="true">
      <ion-toolbar>
        <ion-title>Mes Soir√©es</ion-title>
      </ion-toolbar>
    
      <!-- Segments -->
      <ion-toolbar>
        <ion-segment 
          [value]="selectedSegment()" 
          (ionChange)="onSegmentChange($event)">
          
          <ion-segment-button value="created">
            <ion-label>
              <div class="segment-content">
                <span class="segment-text">Mes cr√©ations</span>
                <ion-badge 
                  class="segment-badge" 
                  *ngIf="createdEvents().length > 0">
                  {{ createdEvents().length }}
                </ion-badge>
              </div>
            </ion-label>
          </ion-segment-button>
    
          <ion-segment-button value="joined">
            <ion-label>
              <div class="segment-content">
                <span class="segment-text">Participations</span>
                <ion-badge 
                  class="segment-badge" 
                  *ngIf="joinedEvents().length > 0">
                  {{ joinedEvents().length }}
                </ion-badge>
              </div>
            </ion-label>
          </ion-segment-button>
        </ion-segment>
      </ion-toolbar>
    </ion-header>
    
    <!-- ========================================
         CONTENT
         ======================================== -->
    <ion-content [fullscreen]="true">
      
      <!-- Pull-to-refresh -->
      <ion-refresher slot="fixed" (ionRefresh)="handleRefresh($event)">
        <ion-refresher-content></ion-refresher-content>
      </ion-refresher>
    
      <!-- ========================================
           LOADING STATE
           ======================================== -->
      <div class="loading-container" *ngIf="isLoading()">
        <ion-spinner name="crescent" color="primary"></ion-spinner>
        <p>Chargement de vos √©v√©nements...</p>
      </div>
    
      <!-- ========================================
           SEGMENT: MES CR√âATIONS
           ======================================== -->
      <div class="events-container" *ngIf="!isLoading() && selectedSegment() === 'created'">
        
        <!-- ========================================
             EMPTY STATE
             ======================================== -->
        <div class="empty-state" *ngIf="createdEvents().length === 0">
          <div class="empty-icon">‚≠ê</div>
          <h3>Aucun √©v√©nement cr√©√©</h3>
          <p>Vous n'avez pas encore cr√©√© d'√©v√©nement.<br>Commencez d√®s maintenant !</p>
          <ion-button 
            class="cta-button"
            (click)="goToCreateEvent()">
            <ion-icon name="add-outline" slot="start"></ion-icon>
            Cr√©er un √©v√©nement
          </ion-button>
        </div>
    
        <!-- ========================================
             EVENT CARDS
             ======================================== -->
        <app-event-card
          *ngFor="let event of createdEvents()"
          [event]="event"
          [participantCount]="getParticipantCount(event.id!)"
          [showFullBadge]="isEventFull(event)"
          (cardClick)="goToEventDetail($event)">
        </app-event-card>
    
      </div>
    
      <!-- ========================================
           SEGMENT: MES PARTICIPATIONS
           ======================================== -->
      <div class="events-container" *ngIf="!isLoading() && selectedSegment() === 'joined'">
        
        <!-- ========================================
             EMPTY STATE
             ======================================== -->
        <div class="empty-state" *ngIf="joinedEvents().length === 0">
          <div class="empty-icon">üé´</div>
          <h3>Aucune participation</h3>
          <p>Vous ne participez √† aucun √©v√©nement.<br>D√©couvrez les √©v√©nements disponibles !</p>
          <ion-button 
            class="cta-button"
            [routerLink]="['/tabs/events']">
            <ion-icon name="calendar-outline" slot="start"></ion-icon>
            Voir les √©v√©nements
          </ion-button>
        </div>
    
        <!-- ========================================
             EVENT CARDS
             ======================================== -->
        <app-event-card
          *ngFor="let event of joinedEvents()"
          [event]="event"
          [participantCount]="getParticipantCount(event.id!)"
          [showFullBadge]="isEventFull(event)"
          (cardClick)="goToEventDetail($event)">
        </app-event-card>
    
      </div>
    
    </ion-content>